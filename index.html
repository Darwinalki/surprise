<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>√âpreuve</title>
<style>
body {margin:0;background:#0b0b0b;color:#00ff88;font-family:monospace;text-align:center;overflow:hidden;}
#container{margin-top:40px;color:white;font-family:Arial;}
img{max-width:80%;border-radius:12px;box-shadow:0 0 20px rgba(255,255,255,0.2);}
#btnSuivant{position:absolute;padding:15px 30px;font-size:18px;border:none;border-radius:10px;background:#ff4d6d;color:white;cursor:pointer;}
#fakeCode{
display:none;
position:fixed;
top:50%;left:50%;
transform:translate(-50%,-50%);
width:80%;max-width:650px;
background:black;
border:2px solid #00ff88;
padding:20px;
text-align:left;
box-shadow:0 0 25px #00ff88;
}
#typeText{min-height:80px;white-space:pre-line;}
input{width:100%;padding:10px;background:#111;color:#00ff88;border:none;margin-top:10px;font-family:monospace;}
button{margin-top:10px;padding:10px 15px;background:#00ff88;border:none;cursor:pointer;}
#countdown{color:red;font-size:18px;margin-top:10px;}
#messageMobile{display:none;font-size:22px;margin-top:100px;color:white;}
</style>
</head>
<body>

<div id="container">
<h1>√âpreuve 1</h1>
<p>R√©sous l‚Äô√©nigme pour continuer‚Ä¶</p>
<img src="enigme.jpg">
</div>

<button id="btnSuivant">Suivant</button>

<div id="fakeCode">
<div id="typeText"></div>
<div id="countdown"></div>
<input type="text" id="codeInput" placeholder="Entrer le code">
<button onclick="checkCode()">Valider</button>
</div>

<div id="messageMobile">
Il faut que tu utilises un ordinateur mon bb üíª‚ù§Ô∏è
</div>

<!-- Sons -->
<audio id="typingSound" src="https://assets.mixkit.co/active_storage/sfx/2869/2869-preview.mp3"></audio>
<audio id="beepSound" src="https://assets.mixkit.co/active_storage/sfx/2571/2571-preview.mp3"></audio>
<audio id="bgMusic" src="https://assets.mixkit.co/music/preview/mixkit-tech-house-vibes-130.mp3" loop></audio>

<script>
const btn=document.getElementById("btnSuivant");
let unlocked=false;

if (/Mobi|Android|iPhone/i.test(navigator.userAgent)){
document.body.innerHTML=document.getElementById("messageMobile").outerHTML;
}

btn.style.top="70%";
btn.style.left="45%";

// Bouton qui fuit
document.addEventListener("mousemove",function(e){
if(unlocked)return;
const rect=btn.getBoundingClientRect();
const distance=Math.hypot(e.clientX-rect.left,e.clientY-rect.top);
if(distance<120){
btn.style.left=Math.random()*(window.innerWidth-100)+"px";
btn.style.top=Math.random()*(window.innerHeight-50)+"px";
}
});

const typingSound=document.getElementById("typingSound");
const beepSound=document.getElementById("beepSound");
const bgMusic=document.getElementById("bgMusic");

// Machine √† √©crire
const textLines=[
"> SYSTEM LOCKED",
"> Indice d√©tect√©...",
"> Je suis le num√©ro 5"
];

function typeWriter(text, i, cb){
if(i<text.length){
document.getElementById("typeText").innerHTML+=text.charAt(i);
typingSound.currentTime=0;
typingSound.play();
setTimeout(()=>typeWriter(text,i+1,cb),30);
}else if(cb) cb();
}

function startTyping(){
document.getElementById("typeText").innerHTML="";
let i=0;
function nextLine(){
if(i<textLines.length){
typeWriter(textLines[i]+"\n",0,()=>{i++;nextLine();});
}}
nextLine();
}

// Compte √† rebours
function startCountdown(){
let time=30;
const cd=document.getElementById("countdown");
const interval=setInterval(()=>{
cd.innerText="Temps restant : "+time+"s";
beepSound.currentTime=0;
beepSound.play();
time--;
if(time<0) clearInterval(interval);
},1000);
}

// Ouvre console
document.addEventListener("click", function(e){
if(!unlocked && e.target.id!=="codeInput"){
document.getElementById("fakeCode").style.display="block";
bgMusic.play();
startTyping();
startCountdown();
}
});

// Son clavier r√©el
document.addEventListener("keydown",()=>{
typingSound.currentTime=0;
typingSound.play();
});

function checkCode(){
const val=document.getElementById("codeInput").value.toLowerCase().trim();
if(val==="se filmer"){
unlocked=true;
document.getElementById("fakeCode").style.display="none";
btn.style.background="#4CAF50";
btn.innerText="ACC√àS AUTORIS√â";
bgMusic.pause();
}else{
alert("Code incorrect üíî");
}
}

btn.addEventListener("click",()=>{if(unlocked){window.location.href="etape2.html";}});
</script>

</body>
</html>
